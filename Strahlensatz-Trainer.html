<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Strahlensätze üben – Interaktives Tool</title>
  <style>
    :root{
      --bg:#0b1020;
      --text:#e9ecf6;
      --muted:#aab3d6;
      --good:#2dd4bf;
      --bad:#fb7185;
      --warn:#fbbf24;
      --shadow: 0 18px 50px rgba(0,0,0,.45);
      --radius: 14px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      --sans: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    }
    body{
      margin:0;
      background:#0b1020;
      color:var(--text);
      font-family:var(--sans);
    }
    header{
      padding:16px;
      max-width:1100px;
      margin:auto;
    }
    .wrap{
      max-width:1100px;
      margin:auto;
      display:grid;
      grid-template-columns:1.2fr .9fr;
      gap:16px;
      padding:16px;
    }
    .card{
      background:#121a33;
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .hd{
      padding:10px 14px;
      font-weight:700;
      background:#0f1730;
      display:flex;
      justify-content:space-between;
      align-items:center;
      font-size:13px;
    }
    .chip{
      background:#1a2450;
      padding:4px 8px;
      border-radius:999px;
      font-size:12px;
    }
    canvas{
      width:100%;
      height:420px;
      display:block;
      background:#0f1730;
    }
    .section{
      padding:14px;
    }
    label{
      font-size:12px;
      color:var(--muted);
    }
    select,input{
      width:100%;
      margin-top:4px;
      padding:8px;
      border-radius:8px;
      border:1px solid #2b3560;
      background:#0f1730;
      color:var(--text);
    }
    .row{
      display:flex;
      gap:8px;
      margin-top:10px;
      flex-wrap:wrap;
    }
    button{
      padding:8px 12px;
      border-radius:8px;
      border:1px solid #2b3560;
      background:#1a2450;
      color:var(--text);
      cursor:pointer;
    }
    .good{background:rgba(45,212,191,.15)}
    .bad{background:rgba(251,113,133,.15)}
    .warn{background:rgba(251,191,36,.15)}
    .task{
      margin-top:10px;
      padding:10px;
      background:#0f1730;
      border-radius:8px;
    }
    .msg{
      margin-top:10px;
      padding:10px;
      border-radius:8px;
      min-height:40px;
    }
    @media(max-width:900px){
      .wrap{grid-template-columns:1fr}
    }
  </style>
</head>
<body>

<header>
  <h2>Strahlensätze – interaktives Übungstool</h2>
</header>

<div class="wrap">

  <div class="card">
    <div class="hd">
      <span>Skizze</span>
      <span class="chip" id="chipType">—</span>
    </div>
    <canvas id="cv" width="1000" height="500"></canvas>
  </div>

  <div class="card">
    <div class="hd">
      <span>Aufgabe</span>
      <span class="chip" id="chipUnknown">—</span>
    </div>
    <div class="section">

      <label>Aufgabentyp</label>
      <select id="mode">
        <option value="mix">Gemischt</option>
        <option value="satz1">1. Strahlensatz</option>
        <option value="satz2">2. Strahlensatz</option>
      </select>

      <div class="row">
        <button id="newBtn">Neue Aufgabe</button>
        <button id="hintBtn">Hinweis</button>
        <button id="solBtn">Lösung</button>
      </div>

      <div class="task">
        <strong id="taskQ">Berechne …</strong>
      </div>

      <label style="margin-top:10px">Deine Lösung</label>
      <div class="row">
        <input id="answer" type="number" step="0.1">
        <button id="checkBtn">Prüfen</button>
      </div>

      <div class="msg" id="msgBox">
        <span id="msgText">—</span>
      </div>

      <div class="task" id="helpText" style="font-size:12px;color:var(--muted)">
        Hinweise erscheinen hier.
      </div>

    </div>
  </div>

</div>

<script>
(() => {
  const $ = id => document.getElementById(id);
  const ctx = $("cv").getContext("2d");

  let state = null;

  function rand(a,b){return Math.floor(Math.random()*(b-a+1))+a}
  function pick(a){return a[Math.floor(Math.random()*a.length)]}
  function round1(x){return Math.round(x*10)/10}

  function makeProblem(){
    const type = $("mode").value === "mix"
      ? pick(["satz1","satz2"])
      : $("mode").value;

    const k = pick([2,3]);
    const SA = rand(4,10);
    const SB = rand(5,12);

    const unknown = type==="satz1" ? pick(["SAp","SBp"]) : pick(["ABp","AB"]);

    const values = {
      SA, SB,
      SAp: SA*k,
      SBp: SB*k,
      AB: round1(Math.hypot(SB-SA,SB)/2),
      ABp: round1(Math.hypot(SB-SA,SB)/2*k),
      k
    };

    return {type, unknown, values};
  }

  function draw(){
    ctx.clearRect(0,0,1000,500);
    ctx.strokeStyle="#6ea8ff";
    ctx.lineWidth=3;
    ctx.beginPath();
    ctx.moveTo(100,400);
    ctx.lineTo(900,400);
    ctx.moveTo(100,400);
    ctx.lineTo(800,200);
    ctx.stroke();
  }

  function newTask(){
    state = makeProblem();
    $("chipType").textContent =
      state.type==="satz1" ? "1. Strahlensatz" : "2. Strahlensatz";
    $("chipUnknown").textContent =
      "Unbekannt: " + state.unknown.replace("p","′");
    $("taskQ").textContent =
      "Berechne " + state.unknown.replace("p","′") + ".";
    $("msgText").textContent="—";
    $("helpText").textContent="Hinweise erscheinen hier.";
    $("answer").value="";
    draw();
  }

  function check(){
    if(!state) return;
    const u = state.unknown;
    const sol = round1(state.values[u]);
    const val = Number($("answer").value);
    if(Math.abs(val-sol)<0.2){
      $("msgBox").className="msg good";
      $("msgText").textContent="Richtig ✔  Ergebnis: "+sol;
    }else{
      $("msgBox").className="msg bad";
      $("msgText").textContent="Noch nicht korrekt.";
    }
  }

  $("newBtn").onclick=newTask;
  $("checkBtn").onclick=check;
})();
</script>

</body>
</html>
